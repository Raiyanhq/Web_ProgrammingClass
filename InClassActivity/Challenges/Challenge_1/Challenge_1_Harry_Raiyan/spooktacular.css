:root{
  /* Brighter palette */
  --pumpkin:#FF8A3D;
  --witch:#6A22C4;
  --monster:#32C853;
  --black:#000;
  --ghost:#FFFFFF;
  --bg:#0b0b12;
  --ink:#F2F2FB;
  --space-1:.25rem; --space-2:.5rem; --space-3:1rem; --space-4:2rem;
  --radius: 14px;
}

html { scroll-behavior: smooth; }
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--ink);
  background: radial-gradient(1200px 600px at 70% -10%, #a176f7 0%, transparent 60%), linear-gradient(#0e0e18, #0a0a12);
  min-height: 100svh;
}

h1,h2,h3 { font-family: Creepster, system-ui, cursive; letter-spacing: .5px; }

/* Accessibility */
.skip-link{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{ left: var(--space-3); top: var(--space-3); width:auto; height:auto; background:var(--ghost); color:#111; padding: .5rem 1rem; border-radius:.5rem; }
:focus-visible { outline: 3px dashed var(--pumpkin); outline-offset: 4px; }

/* Sticky header */
.site-header { position: sticky; top: 0; backdrop-filter: blur(6px); background: color-mix(in oklab, #000 60%, transparent); z-index: 100; }
.site-header .wrap { display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: var(--space-3); padding: .6rem var(--space-4); }
.logo { color: var(--pumpkin); text-decoration: none; font-family: Creepster, cursive; font-size: clamp(1.2rem, 2.5vw, 1.6rem); }
.site-nav a{
  display:inline-block; padding:.4rem .8rem;
  color: var(--ghost); text-decoration: none; border-radius: .5rem;
  transition: transform .2s, color .2s, background .2s;
}
.site-nav a:hover, .site-nav a:focus{
  color: var(--pumpkin); transform: translateY(-2px);
  background: color-mix(in oklab, var(--witch) 40%, transparent);
}

/* Drawer (CSS-only via checkbox) */
.visually-hidden { position:absolute; inline-size:1px; block-size:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; clip-path: inset(50%); }
.menu-btn { display:none; font-size:1.25rem; cursor:pointer; user-select:none; }
.drawer { display:none; }
#menu-toggle:checked ~ .drawer { display:flex; flex-direction:column; gap:.4rem; padding: .8rem; background:#111; position:absolute; inset: 3.1rem var(--space-4) auto auto; border:1px solid #222; border-radius:.6rem; }
#menu-toggle:checked + .menu-btn { outline: 3px dashed var(--monster); }

/* Storybook pages: only one visible at a time */
.storybook { padding: var(--space-4) var(--space-4) calc(var(--space-4) * 2); }
.page { display:none; }
.page:first-of-type { display:block; }       /* default to Home */
:target ~ .page:first-of-type { display:none; }
.page:target { display:block; }

/* Page chrome */
.page .page-inner{
  background: color-mix(in oklab, #0f0f18 50%, transparent);
  border: 1px solid #202036;
  border-radius: var(--radius);
  padding: clamp(1rem, 3vw, 2rem);
  box-shadow: 0 10px 30px #0008;
  position: relative;
  overflow: clip;
}
.page-header { text-align:center; margin-block: .5rem 1rem; }
.kicker{ opacity:.9; margin-top:.2rem; }
.lede{ max-width: 70ch; margin: .5rem auto 1rem; opacity:.98; text-align:center; }

/* Faux book turn */
.page:target .page-inner { animation: flipIn .5s ease both; }
@keyframes flipIn { from { transform: rotateY(-6deg) translateY(6px); opacity:.4; } to{ transform:none; opacity:1; } }

/* HOME: Scene + TOC */
.scene { position: relative; aspect-ratio: 16/9; border-radius: .8rem; overflow: clip; background:#0f0f18; margin-block: .5rem 1rem; }
.scene--sky { background: radial-gradient(60% 70% at 70% -10%, #4a24a0 0, transparent 60%), linear-gradient(#101025, #0a0a12); }
.scene .layer { position:absolute; inset:auto; max-width: 65%; }
.scene .stars { top:8%; left:6%; max-width:72%; opacity:.95; z-index: 999; }
.scene .moon  { top:12%; right:10%; width:180px; filter: drop-shadow(0 0 24px #fff6); }
.scene .bats  { bottom:20%; left:10%; width:260px; animation: flutter 5s ease-in-out infinite alternate; filter: drop-shadow(0 2px 3px #000); }

.toc{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; margin-top: .5rem; }
.toc-item{
  display:flex; align-items:center; gap:.8rem; padding:.8rem 1rem;
  background:#121228; border:1px solid #2a2a48; border-radius:.8rem; text-decoration:none; color:var(--ghost);
  transition: transform .2s, border-color .2s, background .2s;
}
.toc-item:hover, .toc-item:focus{ transform: translateY(-2px); border-color: color-mix(in oklab, var(--pumpkin) 30%, #2a2a48); }
.toc-item img{ width:40px; height:auto; display:block; }

/* Two column layout (Pages 1 & 4) */
.two-col { display:grid; grid-template-columns: 1.4fr 1fr; gap: 1rem; align-items:start; }
.prose p { line-height: 1.6; }
.figure { position: relative; background:#121228; border: 1px solid #2a2a48; border-radius:.8rem; padding: .75rem; text-align:center; }
.figure img { max-width: 100%; height:auto; display:block; margin-inline:auto; }
.figure .pumpkin { width: 240px; }
.figure .candle  { width: 72px; margin-top: .5rem; animation: pulse 2.2s ease-in-out infinite; }
.figure .fog     { position:absolute; left:-10%; right:-10%; bottom:10%; width:120%; opacity:.7; pointer-events:none; }
.figure--sky { background:#121228; }
.figure--sky .stars{ width: 85%; opacity:.95; }
.figure--sky .moon { width: 180px; filter: drop-shadow(0 0 24px #fff6); margin-top:.5rem; }

/* Panels (Page 2) */
.panels { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 1rem; }
.panel{
  background:#121228; border: 1px solid #2a2a48; border-radius: .8rem; padding: 1rem; min-block-size: 220px; position:relative; overflow: clip;
}
.panel .note{ opacity:.9; font-size:.95rem; }
.panel--bats figure img { max-width: 80%; display:block; margin-inline:auto; filter: drop-shadow(0 2px 2px #000); animation: flutter 4.2s ease-in-out infinite; }
.panel--ghost .ghost-img{ max-width: 170px; display:block; margin: .5rem auto; opacity:0; transform: translateY(8px); transition: opacity .35s, transform .35s; }
.panel--ghost:hover .ghost-img, .panel--ghost:focus-within .ghost-img { opacity:1; transform: translateY(0); }

/* Tiles (Page 3) */
.grid-tiles{ display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 1rem; }
.tile{ background:#121228; border: 1px solid #2a2a48; border-radius:.8rem; padding: 1rem; min-block-size: 180px; position:relative; overflow: clip; text-align:center; }
.tile img{ max-width: 130px; display:block; margin: .25rem auto .5rem; }
.tile--lamp img { filter: drop-shadow(0 0 16px #ffd76bcc); animation: pulse 2.2s ease-in-out infinite; }
.tile--web img  { opacity:.95; }
.tile--door img { opacity:.98; animation: shimmer 1.6s linear infinite alternate; }
.tile--witch img{ filter: drop-shadow(0 3px 6px #000); animation: flyby 5.5s ease-in-out infinite; }

/* Pager buttons */
.pager{ display:flex; gap:.6rem; justify-content:center; margin-block: 1rem; }
.btn{
  color: var(--ghost); background: var(--witch); padding: .65rem 1.05rem; border-radius: .6rem; text-decoration: none; display:inline-block; transition: transform .2s, background .2s;
}
.btn:hover, .btn:focus{ transform: translateY(-1px); background: color-mix(in oklab, var(--witch) 70%, var(--pumpkin) 30%); }
.btn.accent{ background: var(--pumpkin); color: #111; }

/* Credits */
.credits{ line-height:1.8; max-width: 60ch; margin: 0 auto; }
.tagline{ text-align:center; margin-block: .75rem 0; opacity:.95; }

/* Footer */
.site-footer { border-top: 1px solid #24244a; }
.site-footer .wrap{ padding: 1rem var(--space-4); text-align:center; color:#d6d7ff; font-size:.95rem; }

/* Animations */
@keyframes flutter { from { transform: translateY(0) } to { transform: translateY(-10px) } }
@keyframes pulse   { 0%,100%{ opacity:.7; transform: scale(1); } 50%{ opacity:1; transform: scale(1.12); } }
@keyframes shimmer { from { filter: drop-shadow(0 0 0 rgba(255,138,61,.25)); } to { filter: drop-shadow(0 0 10px rgba(255,138,61,.55)); } }
@keyframes flyby   { 0%{ transform: translateX(-10%) translateY(0) rotate(-10deg);} 50%{ transform: translateX(80%) translateY(-20%) rotate(10deg);} 100%{ transform: translateX(130%) translateY(10%) rotate(-12deg);} }

/* Responsive tweaks */
@media (max-width: 980px){
  .two-col{ grid-template-columns: 1fr; }
  .grid-tiles{ grid-template-columns: 1fr 1fr; }
  .panels{ grid-template-columns: 1fr 1fr; }
  .toc{ grid-template-columns: 1fr; }
}
@media (max-width: 760px){
  .site-header .wrap { grid-template-columns: auto 1fr auto; }
  .site-nav { display:none; }
  .menu-btn { display:inline-block; color: var(--ghost); }
}
@media (max-width: 560px){
  .grid-tiles, .panels{ grid-template-columns: 1fr; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  * { animation-duration:0.01ms !important; animation-iteration-count:1 !important; transition:none !important; }
}
